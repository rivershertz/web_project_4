!function(){"use strict";class e{constructor(e,t){this._currentForm=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputs=Array.from(this._currentForm.querySelectorAll(this._inputSelector)),this._submitButton=this._currentForm.querySelector(this._submitButtonSelector)}resetValidation(){this._inputs.forEach((e=>{this._hideInputError(e)}))}_showInputError(e,t){const s=this._currentForm.querySelector(".".concat(e.id,"-input-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._currentForm.querySelector(".".concat(e.id,"-input-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleInputError(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputs.some((e=>!e.validity.valid))}toggleSubmitButton(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(e){this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputError(e),this.toggleSubmitButton()}))}))}enableValidation(){this._currentForm.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this._currentForm)}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e,s,o){t(this,"_toggleLikeButton",(()=>{this._element.querySelector(".photos__like").classList.toggle("photos__like_active")})),t(this,"_removeCard",(()=>{this._element.remove(),this._element=null})),this._text=e.name,this._link=e.link,this._templateSelector=s,this._handleCardClick=o}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".photos__card").cloneNode(!0)}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".photos__img");return e.src=this._link,this._element.querySelector(".photos__title").textContent=this._text,e.alt="picture of ".concat(this._text),this._setEventListeners(),this._element}_setEventListeners(){this._element.querySelector(".photos__like").addEventListener("click",(()=>this._toggleLikeButton())),this._element.querySelector(".photos__remove").addEventListener("click",(()=>this._removeCard())),this._element.querySelector(".photos__img").addEventListener("click",(()=>this._handleCardClick(this._text,this._link)))}}document.querySelector(".popup_image-popup");const o=document.querySelector(".popup_new-image"),n=document.querySelector(".popup_profile"),r=(document.querySelector(".profile__name"),document.querySelector(".profile__subtitle"),document.querySelector(".profile__edit")),i=document.querySelector(".profile__add"),l=document.querySelector(".popup__name"),u=document.querySelector(".popup__about"),p=(document.querySelector(".popup__img_image-popup"),document.querySelector(".popup__title_image-popup"),document.querySelector(".photos__list")),a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};class c{constructor(e){var t,s;s=e=>{"Escape"===e.code&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popup=document.querySelector(e),this.close=this.close.bind(this)}open(){this._popup.classList.add("popup_opened")}close(){this._popup.classList.remove("popup_opened")}setEventListeners(){this._popup.querySelector(".popup__close").addEventListener("click",this.close),document.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("mousedown",(e=>{e.target.matches(".popup")&&this.close()}))}}class _ extends c{constructor(e,t){super(e),this._submitFunction=t,this._form=this._popup.querySelector(".popup__form")}_getInputValues(){this._inputs=Array.from(this._popup.querySelectorAll(".popup__input"));const e={};return this._inputs.forEach((t=>{e[t.id]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitFunction(this._getInputValues()),this.close()}))}close(){this._form.reset(),super.close()}}const h=new class extends c{open(e,t){const s=this._popup.querySelector(".popup__img_image-popup"),o=this._popup.querySelector(".popup__title_image-popup");s.src=t,s.alt="picture of ".concat(e),o.textContent=e,super.open()}}(".popup_image-popup");h.setEventListeners();const d=new _(".popup_profile",(e=>{S.setUserInfo(e)}));d.setEventListeners();const m=new _(".popup_new-image",(e=>{const t=v({name:e.title,link:e.link});y.addItem(t.generateCard())}));m.setEventListeners();const S=new class{constructor(e){let{nameSelector:t,aboutSelector:s}=e;this._name=document.querySelector(t),this._about=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this._about.textContent=s}}({nameSelector:".profile__name",aboutSelector:".profile__subtitle"});r.addEventListener("click",(()=>{b.toggleSubmitButton(),b.resetValidation(),(()=>{const e=S.getUserInfo();l.value=e.name,u.value=e.about})(),d.open()})),i.addEventListener("click",(()=>{g.toggleSubmitButton(),g.resetValidation(),m.open()}));const v=e=>new s(e,"#template",((e,t)=>{console.log(e,t),h.open(e,t)})),g=new e(a,o),b=new e(a,n);g.enableValidation(),b.enableValidation();const y=new class{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._containerSelector=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerSelector.prepend(e)}}({items:[{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"}],renderer:e=>{console.log(e),((e,t)=>{const s=v(e);t.prepend(s.generateCard())})({name:e.name,link:e.link},p)}},".photos__list");y.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjFFLG1CQUV0QnVFLEVBQXFCdkUsbUJBRXJCLE1BQU0rRCxFQUFjLElHckZMLE1BQ1g1RyxZQUFZLEVBQW1CMEgsR0FBbUIsSUFBdEMsTUFBQ0MsRUFBRCxTQUFRQyxHQUE4QixFQUM5Q3pILEtBQUswSCxPQUFTRixFQUNkeEgsS0FBSzJILFVBQVlGLEVBQ2pCekgsS0FBSzRILG1CQUFxQmxFLFNBQVN2QyxjQUFjb0csR0FHckRNLGNBQ0k3SCxLQUFLMEgsT0FBT3JHLFNBQVN5RyxJQUNqQjlILEtBQUsySCxVQUFVRyxNQUl2QnBCLFFBQVFxQixHQUNKL0gsS0FBSzRILG1CQUFtQkksUUFBUUQsS0h3RXRDLENBQ0VQLE1IekRpQixDQUNuQixDQUNFcEUsS0FBTSxpQkFDTkUsS0FBTSxnREFFUixDQUNFRixLQUFNLHdCQUNORSxLQUFNLG1EQUVSLENBQ0VGLEtBQU0sVUFDTkUsS0FBTSxtREFFUixDQUNFRixLQUFNLGlCQUNORSxLQUFNLDBEQUVSLENBQ0VGLEtBQU0sY0FDTkUsS0FBTSx1REFFUixDQUNFRixLQUFNLGtCQUNORSxLQUFNLHFER21DTm1FLFNBQVdRLElBQ1RaLFFBQVFDLElBQUlXLEdBdEJDLEVBQUNuRixFQUFNb0YsS0FDeEIsTUFBTTNCLEVBQU8xQyxFQUFhZixHQUMxQm9GLEVBQWdCRixRQUFRekIsRUFBSzFDLGlCQXFCekJzRSxDQUFXLENBQUUvRSxLQUFNNkUsRUFBUzdFLEtBQU1FLEtBQU0yRSxFQUFTM0UsTUFBUW1CLEtBRzdELGlCQUVGZ0MsRUFBWW9CLGMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybSkge1xyXG4gICAgdGhpcy5fY3VycmVudEZvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20odGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9jdXJyZW50Rm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWlucHV0LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWlucHV0LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzLnNvbWUoKGlucHV0KSA9PiB7IFxyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkOyBcclxuICAgIH0pOyBcclxuICB9XHJcblxyXG4gIHRvZ2dsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyhmb3JtKSB7XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2N1cnJlbnRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9jdXJyZW50Rm9ybSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2NhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2ltZ1wiKTtcclxuICAgIGltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xyXG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IGBwaWN0dXJlIG9mICR7dGhpcy5fdGV4dH1gO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2xpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCkpO1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX3JlbW92ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX3JlbW92ZUNhcmQoKSk7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvc19faW1nXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fdGV4dCwgdGhpcy5fbGluaylcclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2xpa2VcIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJwaG90b3NfX2xpa2VfYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9yZW1vdmVDYXJkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBpbWFnZVBvcHVwQ29udGFpbmVyLFxyXG4gIHBvcHVwSW1hZ2VJbWcsXHJcbiAgcG9wdXBJbWFnZVRpdGxlLFxyXG4gIGltYWdlRm9ybUNvbnRhaW5lcixcclxuICBlZGl0QnV0dG9uLFxyXG4gIGFkZEJ1dHRvbixcclxuICBwcm9maWxlRm9ybUNvbnRhaW5lcixcclxuICBpbnB1dE5hbWUsXHJcbiAgaW5wdXRBYm91dCxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcGhvdG9zTGlzdFxyXG59O1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfaW1hZ2UtcG9wdXBcIik7XHJcbmNvbnN0IGltYWdlRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfbmV3LWltYWdlXCIpO1xyXG5jb25zdCBwcm9maWxlRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfcHJvZmlsZVwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XHJcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIik7XHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkXCIpO1xyXG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19uYW1lXCIpO1xyXG5jb25zdCBpbnB1dEFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYWJvdXRcIik7XHJcbmNvbnN0IHBvcHVwSW1hZ2VJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdfaW1hZ2UtcG9wdXBcIik7XHJcbmNvbnN0IHBvcHVwSW1hZ2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RpdGxlX2ltYWdlLXBvcHVwXCIpO1xyXG5jb25zdCBwaG90b3NMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3NfX2xpc3RcIik7XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlICgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmNvZGUgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQubWF0Y2hlcyhcIi5wb3B1cFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRGdW5jdGlvbikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRGdW5jdGlvbiA9IHN1Ym1pdEZ1bmN0aW9uO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpKTtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0ge307XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybURhdGFbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRGdW5jdGlvbih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSAoKSB7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBpbWFnZUZvcm1Db250YWluZXIsXHJcbiAgZWRpdEJ1dHRvbixcclxuICBhZGRCdXR0b24sXHJcbiAgcGhvdG9zTGlzdCxcclxuICBwcm9maWxlRm9ybUNvbnRhaW5lcixcclxuICBpbnB1dE5hbWUsXHJcbiAgaW5wdXRBYm91dCxcclxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuXHJcbmNvbnN0IGltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfaW1hZ2UtcG9wdXBcIik7XHJcbmltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3Byb2ZpbGVcIiwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZm9ybURhdGEpO1xyXG59KTtcclxuZWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9uZXctaW1hZ2VcIiwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IGdlbmVyYXRlQ2FyZCh7XHJcbiAgICBuYW1lOiBmb3JtRGF0YS50aXRsZSxcclxuICAgIGxpbms6IGZvcm1EYXRhLmxpbmssXHJcbiAgfSk7XHJcbiAgcmVuZGVyQ2FyZHMuYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcclxufSk7XHJcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGFib3V0U2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgZmlsbFByb2ZpbGVGb3JtID0gKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJQcm9maWxlSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gdXNlclByb2ZpbGVJbmZvLm5hbWU7XHJcbiAgaW5wdXRBYm91dC52YWx1ZSA9IHVzZXJQcm9maWxlSW5mby5hYm91dDtcclxufTtcclxuXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVTdWJtaXRCdXR0b24oKTtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBmaWxsUHJvZmlsZUZvcm0oKTtcclxuICBlZGl0TW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEltYWdlRm9ybVZhbGlkYXRvci50b2dnbGVTdWJtaXRCdXR0b24oKTtcclxuICBhZGRJbWFnZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBnZW5lcmF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIHJldHVybiBuZXcgQ2FyZChkYXRhLCBcIiN0ZW1wbGF0ZVwiLCAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgY29uc29sZS5sb2cobmFtZSwgbGluayk7XHJcbiAgICBpbWFnZU1vZGFsLm9wZW4obmFtZSwgbGluayk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEsIHBob3Rvc0NvbnRhaW5lcikgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBnZW5lcmF0ZUNhcmQoZGF0YSk7XHJcbiAgcGhvdG9zQ29udGFpbmVyLnByZXBlbmQoY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRJbWFnZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIGltYWdlRm9ybUNvbnRhaW5lclxyXG4pO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVGb3JtQ29udGFpbmVyXHJcbik7XHJcbmFkZEltYWdlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCByZW5kZXJDYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNhcmREYXRhKTtcclxuICAgICAgcmVuZGVyQ2FyZCh7IG5hbWU6IGNhcmREYXRhLm5hbWUsIGxpbms6IGNhcmREYXRhLmxpbmsgfSwgcGhvdG9zTGlzdCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIucGhvdG9zX19saXN0XCJcclxuKTtcclxucmVuZGVyQ2FyZHMucmVuZGVySXRlbXMoKTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIGNvbnN0IHVybCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nX2ltYWdlLXBvcHVwJyk7XHJcbiAgICBjb25zdCBjYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190aXRsZV9pbWFnZS1wb3B1cCcpO1xyXG5cclxuICAgIHVybC5zcmMgPSBsaW5rO1xyXG4gICAgdXJsLmFsdCA9IGBwaWN0dXJlIG9mICR7bmFtZX1gO1xyXG4gICAgY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7bmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXR9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSlcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH07XHJcbn0iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsIl9jdXJyZW50Rm9ybSIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsImlucHV0IiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiX3RvZ2dsZUlucHV0RXJyb3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsInRvZ2dsZVN1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJfZWxlbWVudCIsInRvZ2dsZSIsIl90ZXh0IiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsImltYWdlRWxlbWVudCIsInNyYyIsImFsdCIsIl90b2dnbGVMaWtlQnV0dG9uIiwiX3JlbW92ZUNhcmQiLCJpbWFnZUZvcm1Db250YWluZXIiLCJwcm9maWxlRm9ybUNvbnRhaW5lciIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJpbnB1dE5hbWUiLCJpbnB1dEFib3V0IiwicGhvdG9zTGlzdCIsInZhbGlkYXRpb25Db25maWciLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJjb2RlIiwiY2xvc2UiLCJfcG9wdXAiLCJiaW5kIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUVzY0Nsb3NlIiwidGFyZ2V0IiwibWF0Y2hlcyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGdW5jdGlvbiIsInN1cGVyIiwiX3N1Ym1pdEZ1bmN0aW9uIiwiX2Zvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtRGF0YSIsInZhbHVlIiwicmVzZXQiLCJpbWFnZU1vZGFsIiwidXJsIiwiY2FwdGlvbiIsImVkaXRNb2RhbCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhZGRDYXJkTW9kYWwiLCJjYXJkIiwidGl0bGUiLCJyZW5kZXJDYXJkcyIsImFkZEl0ZW0iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiX25hbWUiLCJfYWJvdXQiLCJnZXRVc2VySW5mbyIsImFib3V0IiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJ1c2VyUHJvZmlsZUluZm8iLCJmaWxsUHJvZmlsZUZvcm0iLCJhZGRJbWFnZUZvcm1WYWxpZGF0b3IiLCJjb25zb2xlIiwibG9nIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRGF0YSIsInBob3Rvc0NvbnRhaW5lciIsInJlbmRlckNhcmQiXSwic291cmNlUm9vdCI6IiJ9